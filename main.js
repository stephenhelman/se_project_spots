!function(){"use strict";var e="";const t=(e,t,r)=>{const o=e.querySelector(`.${t.id}-error`),{inputErrorClass:a,errorClass:n}=r;t.classList.remove(a),o.classList.remove(n),o.textContent=""},r=(e,t)=>{e.classList.add(t),e.disabled=!0},o=(e,t)=>{e.classList.remove(t),e.disabled=!1},a=(e,t,a)=>{(e=>e.some((e=>!e.validity.valid)))(e)?r(t,a):o(t,a)},n=e=>{const{formSelector:r,fieldsetSelector:o}=e;Array.from(document.querySelectorAll(r)).forEach((r=>{r.addEventListener("submit",(function(e){e.preventDefault()})),Array.from(r.querySelectorAll(o)).forEach((r=>{((e,r)=>{const{inputSelector:o,submitButtonSelector:n,inactiveButtonClass:i}=r,d=Array.from(e.querySelectorAll(o)),l=e.querySelector(n);a(d,l,i),d.forEach((o=>{o.addEventListener("input",(()=>{((e,r,o)=>{r.validity.valid?t(e,r,o):((e,t,r,o)=>{const a=e.querySelector(`.${t.id}-error`),{inputErrorClass:n,errorClass:i}=o;t.classList.add(n),a.textContent=r,a.classList.add(i)})(e,r,r.validationMessage,o)})(e,o,r),a(d,l,i)}))}))})(r,e)}))}))},i={formSelector:".modal__form",fieldsetSelector:".modal__fieldset",inputSelector:".modal__input",submitButtonSelector:".modal__form-submit",inactiveButtonClass:"modal__form-submit_inactive",inputErrorClass:"modal__input_type_error",errorClass:"modal__input-error_active"};n(i);var d=e+"8650253b58b46f0f1c06.svg",l=e+"5c2584faa41177b41691.svg",s=e+"40608da7369d39bc1077.svg",u=e+"d73f076c46eb5467f5fc.svg";const c=(()=>{const e=document.querySelector("#delete-confirmation-modal"),t=document.forms["delete-confirmation"],r=t.querySelector(".modal__form-submit");return{deleteCardModal:e,deleteCardForm:t,deleteCardSubmitButton:r}})(),m={cardsContainer:document.querySelector(".cards__list"),cardTemplate:document.querySelector("#card-template")},p=(()=>{const e=document.querySelector("#preview-modal"),t=e.querySelector(".modal__image"),r=e.querySelector(".modal__caption");return{previewModal:e,modalImage:t,modalCaption:r}})(),_=(e,t)=>{y(e.name,t.profileNameElement),y(e.about,t.profileJobElement)},v=(e,t,r,o="prepend")=>{const a=g(e,r);t[o](a)},f=e=>{e.classList.add("modal_is-opened"),document.addEventListener("keydown",h)},S=e=>{e.classList.remove("modal_is-opened"),document.removeEventListener("keydown",h)},h=e=>{if("Escape"===e.key){const e=document.querySelector(".modal_is-opened");S(e)}},b=(e,t)=>{t.value=e},y=(e,t)=>{t.textContent=e},q=(e,t)=>{e.setAttribute("src",t.link),e.setAttribute("alt",t.name)};let E,C;const g=(e,t)=>{const r=m.cardTemplate.content.querySelector(".card").cloneNode(!0),o=r.querySelector(".card__description"),a=r.querySelector(".card__image"),n=r.querySelector(".card__like-button"),i=r.querySelector(".card__delete-button");return y(e.name,o),q(a,e),e.isLiked&&n.classList.add("card__like-button_active"),n.addEventListener("click",(()=>{e.isLiked?t.deleteLike({cardId:e._id}).then(n.classList.toggle("card__like-button_active")).catch((e=>console.error(e))):t.addLike({cardId:e._id}).then((e=>e.ok?e.json():Promise.reject(`Error: ${e.status}`))).then(n.classList.toggle("card__like-button_active")).catch((e=>console.error(e)))})),i.addEventListener("click",(()=>{((e,t)=>{E=e,C=t._id,f(c.deleteCardModal)})(r,e)})),a.addEventListener("click",(()=>{q(p.modalImage,e),y(e.name,p.modalCaption),f(p.previewModal)})),r},k=(e,t,r,o)=>{e.textContent=t?r:o};const L=(()=>{const e=document.querySelector(".profile__button-edit"),t=document.querySelector("#edit-profile-modal"),r=document.forms["edit-profile"],o=r.elements.name,a=r.elements.description,n=r.querySelector(".modal__form-submit"),i=document.querySelector(".profile"),d=i.querySelector(".profile__name"),l=i.querySelector(".profile__description"),s=i.querySelector(".profile__picture"),u=document.querySelector("#edit-avatar-modal"),c=document.querySelector(".profile__avatar-button"),m=document.forms["edit-avatar"],p=m.elements.avatar,_=m.querySelector(".modal__form-submit");return{editProfileButton:e,editProfileModal:t,profileForm:r,profileNameInput:o,jobInput:a,editProfileSubmitButton:n,profile:i,profileNameElement:d,profileJobElement:l,profilePictureElement:s,editAvatarButton:c,editAvatarForm:m,editAvatarInput:p,editAvatarSubmitButton:_,editAvatarModal:u}})(),P=(()=>{const e=document.querySelector(".profile__button-new"),t=document.querySelector("#new-post-modal"),r=document.forms["new-post"],o=r.elements.caption,a=r.elements.link,n=r.querySelector(".modal__form-submit");return{newPostButton:e,newPostModal:t,addCardForm:r,captionInput:o,linkInput:a,addCardSubmitButton:n}})(),A=new class{constructor({baseUrl:e,token:t,contentType:r}){this._baseUrl=e,this._headers={authorization:t,"Content-Type":r}}_initializeRequest(){return fetch(`${this._baseUrl}${this._endpoint}`,{method:this._method,headers:this._headers,body:this._body?JSON.stringify(this._body):null})}_generateRequestOptions({endpoint:e,method:t,body:r=null}){this._endpoint=e,this._method=t,this._body=r}getUserInfo(){return this._generateRequestOptions({endpoint:"/users/me",method:"GET"}),this._initializeRequest()}updateProfileInfo({name:e,about:t}){return this._generateRequestOptions({endpoint:"/users/me",method:"PATCH",body:{name:e,about:t}}),this._initializeRequest()}updateAvatar({avatar:e}){return this._generateRequestOptions({endpoint:"/users/me/avatar",method:"PATCH",body:{avatar:e}}),this._initializeRequest()}getCards(){return this._generateRequestOptions({endpoint:"/cards",method:"GET"}),this._initializeRequest()}createCard({name:e,link:t}){return this._generateRequestOptions({endpoint:"/cards",method:"POST",body:{name:e,link:t}}),this._initializeRequest()}deleteCard({cardId:e}){return this._generateRequestOptions({endpoint:`/cards/${e}`,method:"DELETE"}),this._initializeRequest()}addLike({cardId:e}){return this._generateRequestOptions({endpoint:`/cards/${e}/likes`,method:"PUT"}),this._initializeRequest()}deleteLike({cardId:e}){return this._generateRequestOptions({endpoint:`/cards/${e}/likes`,method:"DELETE"}),this._initializeRequest()}}({baseUrl:"https://around-api.en.tripleten-services.com/v1",token:"a30404cf-e968-457d-9272-e0540b733e36",contentType:"application/json"});L.editAvatarButton.addEventListener("click",(()=>{f(L.editAvatarModal)})),L.editAvatarForm.addEventListener("submit",(e=>{e.preventDefault(),k(L.editAvatarSubmitButton,!0,"Saving...","Save"),A.updateAvatar({avatar:L.editAvatarInput.value}).then((e=>e.ok?e.json():Promise.reject(`Error: ${e.status}`))).then((()=>{q(L.profilePictureElement,{link:L.editAvatarInput.value,name:"Profile Picture"}),L.editAvatarForm.reset(),S(L.editAvatarModal)})).catch((e=>console.error(e))).finally((()=>{k(L.editAvatarSubmitButton,!1,"Saving...","Save")}))})),L.editProfileButton.addEventListener("click",(()=>{var e,r,a;f(L.editProfileModal),e=L.profileForm,r=i,a=L.editProfileSubmitButton,Array.from(e.querySelectorAll(r.inputSelector)).forEach((o=>{t(e,o,r)})),o(a,i.inactiveButtonClass),b(L.profileNameElement.textContent,L.profileNameInput),b(L.profileJobElement.textContent,L.jobInput)})),L.profileForm.addEventListener("submit",(e=>{e.preventDefault(),k(L.editProfileSubmitButton,!0,"Saving...","Save"),A.updateProfileInfo({name:L.profileNameInput.value,about:L.jobInput.value}).then((e=>e.ok?e.json():Promise.reject(`Error: ${e.status}`))).then((e=>{_(e,L),S(L.editProfileModal)})).catch((e=>console.error(e))).finally((()=>{k(L.editProfileSubmitButton,!1,"Saving...","Save")}))})),P.newPostButton.addEventListener("click",(()=>{f(P.newPostModal)})),P.addCardForm.addEventListener("submit",(e=>{e.preventDefault(),k(P.addCardSubmitButton,!0,"Saving...","Save"),A.createCard({name:P.captionInput.value,link:P.linkInput.value}).then((e=>e.ok?e.json():Promise.reject(`Error: ${e.status}`))).then((e=>{v(e,m.cardsContainer,A),P.addCardForm.reset(),r(P.addCardSubmitButton,i.inactiveButtonClass),S(P.newPostModal)})).finally((()=>{k(P.addCardSubmitButton,!1,"Saving...","Save")}))})),c.deleteCardForm.addEventListener("submit",(e=>{e.preventDefault(),k(c.deleteCardSubmitButton,!0,"Deleting...","Delete"),A.deleteCard({cardId:C}).then((e=>(e.ok&&(E.remove(),S(c.deleteCardModal)),Promise.reject(`Error: ${e.status}`)))).catch((e=>console.error(e))).finally((()=>{k(c.deleteCardSubmitButton,!1,"Deleting...","Delete")}))})),c.deleteCardForm.addEventListener("reset",(()=>S(c.deleteCardModal))),(()=>{const e=document.querySelector("#image-header"),t=document.querySelector("#image-pencil"),r=document.querySelector("#image-plus"),o=document.querySelector("#image-avatar-edit");[[e,d],[t,l],[r,s],[o,u]].forEach((e=>{(([e,t])=>{e.src=t})(e)}))})(),document.querySelectorAll(".modal").forEach((e=>{e.addEventListener("mousedown",(t=>{(t.target===e||t.target.classList.contains("modal__button_type_close"))&&S(e)}))})),A.getUserInfo().then((e=>e.ok?e.json():Promise.reject(`Error: ${e.status}`))).then((e=>{((e,t)=>{_(e,t),q(t.profilePictureElement,{link:e.avatar,name:e.name})})(e,L)})).catch((e=>{console.error(e)})),A.getCards().then((e=>e.ok?e.json():Promise.reject(`Error: ${e.status}`))).then((e=>{if(!e.length)return console.log("no cards found");e.forEach((e=>{v(e,m.cardsContainer,A)}))})),n(i)}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q0FuRSxNQUFNTyxHQUNEQSxFQUFJQyxHQUNDRCxFQUFJRSxPQUVOQyxRQUFRQyxPQUFPLFVBQVVKLEVBQUlLLFlBRXJDWixNQUFNeEMsSUFDTCxJQUFLQSxFQUFLbUksT0FDUixPQUFPdkYsUUFBUXdGLElBQUksa0JBRXJCcEksRUFBSzVCLFNBQVNpSyxJQUNaL0gsRUFBVytILEVBQU05SSxFQUFXQyxlQUFnQmlCLFNBSWxENUMsRUFBaUJtQixFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9zcG90cy93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X3Nwb3RzL3dlYnBhY2svcnVudGltZS9wdWJsaWNQYXRoIiwid2VicGFjazovL3NlX3Byb2plY3Rfc3BvdHMvLi9zcmMvc2NyaXB0cy92YWxpZGF0aW9uLmpzIiwid2VicGFjazovL3NlX3Byb2plY3Rfc3BvdHMvLi9zcmMvdXRpbC91dGlsLmpzIiwid2VicGFjazovL3NlX3Byb2plY3Rfc3BvdHMvLi9zcmMvdXRpbC9jb25maWcuanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9zcG90cy8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X3Nwb3RzLy4vc3JjL2NvbXBvbmVudHMvQXBpLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIFRoZSByZXF1aXJlIHNjb3BlXG52YXIgX193ZWJwYWNrX3JlcXVpcmVfXyA9IHt9O1xuXG4iLCJfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiOyIsImNvbnN0IHNob3dJbnB1dEVycm9yID0gKGZvcm1FbGVtZW50LCBpbnB1dEVsZW1lbnQsIGVycm9yTWVzc2FnZSwgc2V0dGluZ3MpID0+IHtcbiAgY29uc3QgZXJyb3JFbGVtZW50ID0gZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihgLiR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xuICBjb25zdCB7IGlucHV0RXJyb3JDbGFzcywgZXJyb3JDbGFzcyB9ID0gc2V0dGluZ3M7XG4gIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKGlucHV0RXJyb3JDbGFzcyk7XG4gIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGVycm9yTWVzc2FnZTtcbiAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQoZXJyb3JDbGFzcyk7XG59O1xuXG5jb25zdCBoaWRlSW5wdXRFcnJvciA9IChmb3JtRWxlbWVudCwgaW5wdXRFbGVtZW50LCBzZXR0aW5ncykgPT4ge1xuICBjb25zdCBlcnJvckVsZW1lbnQgPSBmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XG4gIGNvbnN0IHsgaW5wdXRFcnJvckNsYXNzLCBlcnJvckNsYXNzIH0gPSBzZXR0aW5ncztcbiAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoaW5wdXRFcnJvckNsYXNzKTtcbiAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoZXJyb3JDbGFzcyk7XG4gIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IFwiXCI7XG59O1xuXG5jb25zdCBjaGVja0lucHV0VmFsaWRpdHkgPSAoZm9ybUVsZW1lbnQsIGlucHV0RWxlbWVudCwgc2V0dGluZ3MpID0+IHtcbiAgaWYgKCFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcbiAgICBzaG93SW5wdXRFcnJvcihcbiAgICAgIGZvcm1FbGVtZW50LFxuICAgICAgaW5wdXRFbGVtZW50LFxuICAgICAgaW5wdXRFbGVtZW50LnZhbGlkYXRpb25NZXNzYWdlLFxuICAgICAgc2V0dGluZ3NcbiAgICApO1xuICB9IGVsc2Uge1xuICAgIGhpZGVJbnB1dEVycm9yKGZvcm1FbGVtZW50LCBpbnB1dEVsZW1lbnQsIHNldHRpbmdzKTtcbiAgfVxufTtcblxuY29uc3QgaGFzSW52YWxpZElucHV0ID0gKGlucHV0TGlzdCkgPT4ge1xuICByZXR1cm4gaW5wdXRMaXN0LnNvbWUoKGlucHV0RWxlbWVudCkgPT4ge1xuICAgIHJldHVybiAhaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkO1xuICB9KTtcbn07XG5cbmV4cG9ydCBjb25zdCBkaXNhYmxlQnV0dG9uID0gKGJ1dHRvbiwgaW5hY3RpdmVCdXR0b25DbGFzcykgPT4ge1xuICBidXR0b24uY2xhc3NMaXN0LmFkZChpbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgYnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcbn07XG5cbmV4cG9ydCBjb25zdCBlbmFibGVCdXR0b24gPSAoYnV0dG9uLCBpbmFjdGl2ZUJ1dHRvbkNsYXNzKSA9PiB7XG4gIGJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKGluYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICBidXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcbn07XG5cbmNvbnN0IHRvZ2dsZUJ1dHRvblN0YXRlID0gKGlucHV0TGlzdCwgYnV0dG9uRWxlbWVudCwgaW5hY3RpdmVCdXR0b25DbGFzcykgPT4ge1xuICBpZiAoaGFzSW52YWxpZElucHV0KGlucHV0TGlzdCkpIHtcbiAgICBkaXNhYmxlQnV0dG9uKGJ1dHRvbkVsZW1lbnQsIGluYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICB9IGVsc2Uge1xuICAgIGVuYWJsZUJ1dHRvbihidXR0b25FbGVtZW50LCBpbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgfVxufTtcblxuY29uc3Qgc2V0RXZlbnRMaXN0ZW5lcnMgPSAoZm9ybUVsZW1lbnQsIHNldHRpbmdzKSA9PiB7XG4gIGNvbnN0IHsgaW5wdXRTZWxlY3Rvciwgc3VibWl0QnV0dG9uU2VsZWN0b3IsIGluYWN0aXZlQnV0dG9uQ2xhc3MgfSA9IHNldHRpbmdzO1xuICBjb25zdCBpbnB1dExpc3QgPSBBcnJheS5mcm9tKGZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoaW5wdXRTZWxlY3RvcikpO1xuICBjb25zdCBidXR0b25FbGVtZW50ID0gZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihzdWJtaXRCdXR0b25TZWxlY3Rvcik7XG4gIHRvZ2dsZUJ1dHRvblN0YXRlKGlucHV0TGlzdCwgYnV0dG9uRWxlbWVudCwgaW5hY3RpdmVCdXR0b25DbGFzcyk7XG5cbiAgaW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xuICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xuICAgICAgY2hlY2tJbnB1dFZhbGlkaXR5KGZvcm1FbGVtZW50LCBpbnB1dEVsZW1lbnQsIHNldHRpbmdzKTtcbiAgICAgIHRvZ2dsZUJ1dHRvblN0YXRlKGlucHV0TGlzdCwgYnV0dG9uRWxlbWVudCwgaW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgfSk7XG4gIH0pO1xufTtcblxuZXhwb3J0IGNvbnN0IGVuYWJsZVZhbGlkYXRpb24gPSAoc2V0dGluZ3MpID0+IHtcbiAgY29uc3QgeyBmb3JtU2VsZWN0b3IsIGZpZWxkc2V0U2VsZWN0b3IgfSA9IHNldHRpbmdzO1xuICBjb25zdCBmb3JtTGlzdCA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChmb3JtU2VsZWN0b3IpKTtcbiAgZm9ybUxpc3QuZm9yRWFjaCgoZm9ybUVsZW1lbnQpID0+IHtcbiAgICBmb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIGZ1bmN0aW9uIChldnQpIHtcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH0pO1xuXG4gICAgY29uc3QgZmllbGRzZXRMaXN0ID0gQXJyYXkuZnJvbShcbiAgICAgIGZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoZmllbGRzZXRTZWxlY3RvcilcbiAgICApO1xuXG4gICAgZmllbGRzZXRMaXN0LmZvckVhY2goKGZpZWxkc2V0KSA9PiB7XG4gICAgICBzZXRFdmVudExpc3RlbmVycyhmaWVsZHNldCwgc2V0dGluZ3MpO1xuICAgIH0pO1xuICB9KTtcbn07XG5cbmV4cG9ydCBjb25zdCByZXNldFZhbGlkYXRpb24gPSAoZm9ybUVsZW1lbnQsIHNldHRpbmdzLCBzdWJtaXRCdXR0b24pID0+IHtcbiAgY29uc3QgaW5wdXRMaXN0ID0gQXJyYXkuZnJvbShcbiAgICBmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHNldHRpbmdzLmlucHV0U2VsZWN0b3IpXG4gICk7XG4gIGlucHV0TGlzdC5mb3JFYWNoKChpbnB1dCkgPT4ge1xuICAgIGhpZGVJbnB1dEVycm9yKGZvcm1FbGVtZW50LCBpbnB1dCwgc2V0dGluZ3MpO1xuICB9KTtcbiAgZW5hYmxlQnV0dG9uKHN1Ym1pdEJ1dHRvbiwgY29uZmlnLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xufTtcblxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IHtcbiAgZm9ybVNlbGVjdG9yOiBcIi5tb2RhbF9fZm9ybVwiLFxuICBmaWVsZHNldFNlbGVjdG9yOiBcIi5tb2RhbF9fZmllbGRzZXRcIixcbiAgaW5wdXRTZWxlY3RvcjogXCIubW9kYWxfX2lucHV0XCIsXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5tb2RhbF9fZm9ybS1zdWJtaXRcIixcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJtb2RhbF9fZm9ybS1zdWJtaXRfaW5hY3RpdmVcIixcbiAgaW5wdXRFcnJvckNsYXNzOiBcIm1vZGFsX19pbnB1dF90eXBlX2Vycm9yXCIsXG4gIGVycm9yQ2xhc3M6IFwibW9kYWxfX2lucHV0LWVycm9yX2FjdGl2ZVwiLFxufTtcblxuZW5hYmxlVmFsaWRhdGlvbihjb25maWcpO1xuIiwiaW1wb3J0IGhlYWRlckltYWdlIGZyb20gXCIuLi9pbWFnZXMvTG9nby5zdmdcIjtcbmltcG9ydCBwZW5jaWxJbWFnZSBmcm9tIFwiLi4vaW1hZ2VzL3BlbmNpbC5zdmdcIjtcbmltcG9ydCBwbHVzSW1hZ2UgZnJvbSBcIi4uL2ltYWdlcy9QbHVzLnN2Z1wiO1xuaW1wb3J0IGF2YXRhclBlbmNpbCBmcm9tIFwiLi4vaW1hZ2VzL2F2YXRhclBlbmNpbC5zdmdcIjtcbmltcG9ydCB7XG4gIGNyZWF0ZURlbGV0ZUNhcmRDb25maWcsXG4gIGNyZWF0ZVByZXZpZXdNb2RhbENvbmZpZyxcbiAgY3JlYXRlQ2FyZFNlbGVjdG9yQ29uZmlnLFxufSBmcm9tIFwiLi9jb25maWcuanNcIjtcblxuZXhwb3J0IGNvbnN0IGluaXRpYWxpemVXZWJwYWNrID0gKCkgPT4ge1xuICAvL3NldCB1cCBpbWFnZXMgZm9yIHdlYnBhY2tcbiAgY29uc3QgaGVhZGVySW1hZ2VFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNpbWFnZS1oZWFkZXJcIik7XG4gIGNvbnN0IHBlbmNpbEltYWdlRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjaW1hZ2UtcGVuY2lsXCIpO1xuICBjb25zdCBwbHVzSW1hZ2VFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNpbWFnZS1wbHVzXCIpO1xuICBjb25zdCBhdmF0YXJQZW5jaWxFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNpbWFnZS1hdmF0YXItZWRpdFwiKTtcbiAgY29uc3Qgd2VicGFja0ltYWdlQXJyYXkgPSBbXG4gICAgW2hlYWRlckltYWdlRWxlbWVudCwgaGVhZGVySW1hZ2VdLFxuICAgIFtwZW5jaWxJbWFnZUVsZW1lbnQsIHBlbmNpbEltYWdlXSxcbiAgICBbcGx1c0ltYWdlRWxlbWVudCwgcGx1c0ltYWdlXSxcbiAgICBbYXZhdGFyUGVuY2lsRWxlbWVudCwgYXZhdGFyUGVuY2lsXSxcbiAgXTtcblxuICBjb25zdCBkZWZpbmVTcmNGb3JXZWJwYWNrSW1hZ2VzID0gKFtlbGVtZW50LCBpbWFnZUltcG9ydF0pID0+IHtcbiAgICBlbGVtZW50LnNyYyA9IGltYWdlSW1wb3J0O1xuICB9O1xuXG4gIHdlYnBhY2tJbWFnZUFycmF5LmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICBkZWZpbmVTcmNGb3JXZWJwYWNrSW1hZ2VzKGVsZW1lbnQpO1xuICB9KTtcbn07XG5cbmV4cG9ydCBjb25zdCBkZWxldGVDb25maWcgPSBjcmVhdGVEZWxldGVDYXJkQ29uZmlnKCk7XG5leHBvcnQgY29uc3QgY2FyZENvbmZpZyA9IGNyZWF0ZUNhcmRTZWxlY3RvckNvbmZpZygpO1xuY29uc3QgcHJldmlld01vZGFsQ29uZmlnID0gY3JlYXRlUHJldmlld01vZGFsQ29uZmlnKCk7XG5cbmV4cG9ydCBjb25zdCBjaGFuZ2VQcm9maWxlSW5mbyA9IChkYXRhLCBjb25maWcpID0+IHtcbiAgY2hhbmdlVGV4dChkYXRhLm5hbWUsIGNvbmZpZy5wcm9maWxlTmFtZUVsZW1lbnQpO1xuICBjaGFuZ2VUZXh0KGRhdGEuYWJvdXQsIGNvbmZpZy5wcm9maWxlSm9iRWxlbWVudCk7XG59O1xuXG5leHBvcnQgY29uc3QgaGFuZGxlTG9hZFByb2ZpbGVJbmZvID0gKGRhdGEsIGNvbmZpZykgPT4ge1xuICBjaGFuZ2VQcm9maWxlSW5mbyhkYXRhLCBjb25maWcpO1xuICBzZXRJbWFnZUF0dHJpYnV0ZXMoY29uZmlnLnByb2ZpbGVQaWN0dXJlRWxlbWVudCwge1xuICAgIGxpbms6IGRhdGEuYXZhdGFyLFxuICAgIG5hbWU6IGRhdGEubmFtZSxcbiAgfSk7XG59O1xuXG5leHBvcnQgY29uc3QgcmVuZGVyQ2FyZCA9IChpdGVtLCBjb250YWluZXIsIGFwaSwgbWV0aG9kID0gXCJwcmVwZW5kXCIpID0+IHtcbiAgY29uc3QgY2FyZEVsZW1lbnQgPSBnZXRDYXJkRWxlbWVudChpdGVtLCBhcGkpO1xuXG4gIGNvbnRhaW5lclttZXRob2RdKGNhcmRFbGVtZW50KTtcbn07XG5cbmV4cG9ydCBjb25zdCBvcGVuTW9kYWwgPSAobW9kYWwpID0+IHtcbiAgbW9kYWwuY2xhc3NMaXN0LmFkZChcIm1vZGFsX2lzLW9wZW5lZFwiKTtcbiAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgaGFuZGxlRXNjYXBlKTtcbn07XG5cbmV4cG9ydCBjb25zdCBjbG9zZU1vZGFsID0gKG1vZGFsKSA9PiB7XG4gIG1vZGFsLmNsYXNzTGlzdC5yZW1vdmUoXCJtb2RhbF9pcy1vcGVuZWRcIik7XG4gIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIGhhbmRsZUVzY2FwZSk7XG59O1xuXG5jb25zdCBoYW5kbGVFc2NhcGUgPSAoZSkgPT4ge1xuICBpZiAoZS5rZXkgPT09IFwiRXNjYXBlXCIpIHtcbiAgICBjb25zdCBvcGVuTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX2lzLW9wZW5lZFwiKTtcbiAgICBjbG9zZU1vZGFsKG9wZW5Nb2RhbCk7XG4gIH1cbn07XG5cbmV4cG9ydCBjb25zdCBwcmVmaWxsSW5wdXQgPSAodGV4dCwgaW5wdXRFbGVtZW50KSA9PiB7XG4gIGlucHV0RWxlbWVudC52YWx1ZSA9IHRleHQ7XG59O1xuXG5jb25zdCBjaGFuZ2VUZXh0ID0gKHZhbHVlLCBlbGVtZW50VG9DaGFuZ2UpID0+IHtcbiAgZWxlbWVudFRvQ2hhbmdlLnRleHRDb250ZW50ID0gdmFsdWU7XG59O1xuXG5leHBvcnQgY29uc3Qgc2V0TW9kYWxFdmVudExpc3RlbmVycyA9ICgpID0+IHtcbiAgY29uc3QgbW9kYWxzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5tb2RhbFwiKTtcblxuICAvL2FkZCBjbG9zZU1vZGFsIGZ1bmN0aW9uYWxpdHkgdG8gY2xvc2UgYnV0dG9ucyBvciBvdmVybGF5XG4gIG1vZGFscy5mb3JFYWNoKChtb2RhbCkgPT4ge1xuICAgIG1vZGFsLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgKGUpID0+IHtcbiAgICAgIGlmIChcbiAgICAgICAgZS50YXJnZXQgPT09IG1vZGFsIHx8XG4gICAgICAgIGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcIm1vZGFsX19idXR0b25fdHlwZV9jbG9zZVwiKVxuICAgICAgKSB7XG4gICAgICAgIGNsb3NlTW9kYWwobW9kYWwpO1xuICAgICAgfVxuICAgIH0pO1xuICB9KTtcbn07XG5cbmV4cG9ydCBjb25zdCBzZXRJbWFnZUF0dHJpYnV0ZXMgPSAoaW1hZ2VFbGVtZW50LCBkYXRhKSA9PiB7XG4gIGltYWdlRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJzcmNcIiwgZGF0YS5saW5rKTtcbiAgaW1hZ2VFbGVtZW50LnNldEF0dHJpYnV0ZShcImFsdFwiLCBkYXRhLm5hbWUpO1xufTtcblxuZXhwb3J0IGxldCBzZWxlY3RlZENhcmQ7XG5leHBvcnQgbGV0IHNlbGVjdGVkQ2FyZElkO1xuXG5jb25zdCBoYW5kbGVEZWxldGVDYXJkID0gKGNhcmRFbGVtZW50LCBkYXRhKSA9PiB7XG4gIHNlbGVjdGVkQ2FyZCA9IGNhcmRFbGVtZW50O1xuICBzZWxlY3RlZENhcmRJZCA9IGRhdGEuX2lkO1xuICBvcGVuTW9kYWwoZGVsZXRlQ29uZmlnLmRlbGV0ZUNhcmRNb2RhbCk7XG59O1xuXG5leHBvcnQgY29uc3QgZ2V0Q2FyZEVsZW1lbnQgPSAoZGF0YSwgYXBpKSA9PiB7XG4gIGNvbnN0IGNhcmRFbGVtZW50ID0gY2FyZENvbmZpZy5jYXJkVGVtcGxhdGUuY29udGVudFxuICAgIC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRcIilcbiAgICAuY2xvbmVOb2RlKHRydWUpO1xuXG4gIGNvbnN0IGNhcmRUaXRsZSA9IGNhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fZGVzY3JpcHRpb25cIik7XG4gIGNvbnN0IGNhcmRJbWFnZSA9IGNhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIik7XG4gIGNvbnN0IGxpa2VCdXR0b24gPSBjYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpa2UtYnV0dG9uXCIpO1xuICBjb25zdCBkZWxldGVCdXR0b24gPSBjYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2RlbGV0ZS1idXR0b25cIik7XG5cbiAgY2hhbmdlVGV4dChkYXRhLm5hbWUsIGNhcmRUaXRsZSk7XG4gIHNldEltYWdlQXR0cmlidXRlcyhjYXJkSW1hZ2UsIGRhdGEpO1xuXG4gIGlmIChkYXRhLmlzTGlrZWQpIHtcbiAgICBsaWtlQnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJjYXJkX19saWtlLWJ1dHRvbl9hY3RpdmVcIik7XG4gIH1cblxuICBsaWtlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgZGF0YS5pc0xpa2VkXG4gICAgICA/IGFwaVxuICAgICAgICAgIC5kZWxldGVMaWtlKHsgY2FyZElkOiBkYXRhLl9pZCB9KVxuICAgICAgICAgIC50aGVuKGxpa2VCdXR0b24uY2xhc3NMaXN0LnRvZ2dsZShcImNhcmRfX2xpa2UtYnV0dG9uX2FjdGl2ZVwiKSlcbiAgICAgICAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5lcnJvcihlcnIpKVxuICAgICAgOiBhcGlcbiAgICAgICAgICAuYWRkTGlrZSh7IGNhcmRJZDogZGF0YS5faWQgfSlcbiAgICAgICAgICAudGhlbigocmVzKSA9PiB7XG4gICAgICAgICAgICBpZiAocmVzLm9rKSB7XG4gICAgICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xuICAgICAgICAgIH0pXG4gICAgICAgICAgLnRoZW4obGlrZUJ1dHRvbi5jbGFzc0xpc3QudG9nZ2xlKFwiY2FyZF9fbGlrZS1idXR0b25fYWN0aXZlXCIpKVxuICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmVycm9yKGVycikpO1xuICB9KTtcblxuICBkZWxldGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICBoYW5kbGVEZWxldGVDYXJkKGNhcmRFbGVtZW50LCBkYXRhKTtcbiAgfSk7XG5cbiAgY2FyZEltYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgc2V0SW1hZ2VBdHRyaWJ1dGVzKHByZXZpZXdNb2RhbENvbmZpZy5tb2RhbEltYWdlLCBkYXRhKTtcbiAgICBjaGFuZ2VUZXh0KGRhdGEubmFtZSwgcHJldmlld01vZGFsQ29uZmlnLm1vZGFsQ2FwdGlvbik7XG4gICAgb3Blbk1vZGFsKHByZXZpZXdNb2RhbENvbmZpZy5wcmV2aWV3TW9kYWwpO1xuICB9KTtcblxuICByZXR1cm4gY2FyZEVsZW1lbnQ7XG59O1xuXG5leHBvcnQgY29uc3QgY2hhbmdlVGV4dE9uU3VibWlzc2lvbiA9IChcbiAgYnV0dG9uLFxuICBpc0xvYWRpbmcsXG4gIG5ld1RleHQsXG4gIGRlZmF1bHRUZXh0XG4pID0+IHtcbiAgaWYgKGlzTG9hZGluZykge1xuICAgIGJ1dHRvbi50ZXh0Q29udGVudCA9IG5ld1RleHQ7XG4gIH0gZWxzZSB7XG4gICAgYnV0dG9uLnRleHRDb250ZW50ID0gZGVmYXVsdFRleHQ7XG4gIH1cbn07XG4iLCJleHBvcnQgY29uc3QgY3JlYXRlUHJvZmlsZUNvbmZpZyA9ICgpID0+IHtcbiAgLy9lZGl0IHByb2ZpbGUgZWxlbWVudHNcbiAgY29uc3QgZWRpdFByb2ZpbGVCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2J1dHRvbi1lZGl0XCIpO1xuICBjb25zdCBlZGl0UHJvZmlsZU1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNlZGl0LXByb2ZpbGUtbW9kYWxcIik7XG4gIGNvbnN0IHByb2ZpbGVGb3JtID0gZG9jdW1lbnQuZm9ybXNbXCJlZGl0LXByb2ZpbGVcIl07XG4gIGNvbnN0IHByb2ZpbGVOYW1lSW5wdXQgPSBwcm9maWxlRm9ybS5lbGVtZW50cy5uYW1lO1xuICBjb25zdCBqb2JJbnB1dCA9IHByb2ZpbGVGb3JtLmVsZW1lbnRzLmRlc2NyaXB0aW9uO1xuICBjb25zdCBlZGl0UHJvZmlsZVN1Ym1pdEJ1dHRvbiA9IHByb2ZpbGVGb3JtLnF1ZXJ5U2VsZWN0b3IoXG4gICAgXCIubW9kYWxfX2Zvcm0tc3VibWl0XCJcbiAgKTtcblxuICAvL2VsZW1lbnRzIGluIHRoZSBwcm9maWxlIHRoYXQgd2lsbCBiZSBjaGFuZ2VkXG4gIGNvbnN0IHByb2ZpbGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVcIik7XG4gIGNvbnN0IHByb2ZpbGVOYW1lRWxlbWVudCA9IHByb2ZpbGUucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19uYW1lXCIpO1xuICBjb25zdCBwcm9maWxlSm9iRWxlbWVudCA9IHByb2ZpbGUucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19kZXNjcmlwdGlvblwiKTtcbiAgY29uc3QgcHJvZmlsZVBpY3R1cmVFbGVtZW50ID0gcHJvZmlsZS5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX3BpY3R1cmVcIik7XG5cbiAgLy9lZGl0IGF2YXRhciBlbGVtZW50c1xuICBjb25zdCBlZGl0QXZhdGFyTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2VkaXQtYXZhdGFyLW1vZGFsXCIpO1xuICBjb25zdCBlZGl0QXZhdGFyQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hdmF0YXItYnV0dG9uXCIpO1xuICBjb25zdCBlZGl0QXZhdGFyRm9ybSA9IGRvY3VtZW50LmZvcm1zW1wiZWRpdC1hdmF0YXJcIl07XG4gIGNvbnN0IGVkaXRBdmF0YXJJbnB1dCA9IGVkaXRBdmF0YXJGb3JtLmVsZW1lbnRzLmF2YXRhcjtcbiAgY29uc3QgZWRpdEF2YXRhclN1Ym1pdEJ1dHRvbiA9IGVkaXRBdmF0YXJGb3JtLnF1ZXJ5U2VsZWN0b3IoXG4gICAgXCIubW9kYWxfX2Zvcm0tc3VibWl0XCJcbiAgKTtcblxuICByZXR1cm4ge1xuICAgIGVkaXRQcm9maWxlQnV0dG9uLFxuICAgIGVkaXRQcm9maWxlTW9kYWwsXG4gICAgcHJvZmlsZUZvcm0sXG4gICAgcHJvZmlsZU5hbWVJbnB1dCxcbiAgICBqb2JJbnB1dCxcbiAgICBlZGl0UHJvZmlsZVN1Ym1pdEJ1dHRvbixcbiAgICBwcm9maWxlLFxuICAgIHByb2ZpbGVOYW1lRWxlbWVudCxcbiAgICBwcm9maWxlSm9iRWxlbWVudCxcbiAgICBwcm9maWxlUGljdHVyZUVsZW1lbnQsXG4gICAgZWRpdEF2YXRhckJ1dHRvbixcbiAgICBlZGl0QXZhdGFyRm9ybSxcbiAgICBlZGl0QXZhdGFySW5wdXQsXG4gICAgZWRpdEF2YXRhclN1Ym1pdEJ1dHRvbixcbiAgICBlZGl0QXZhdGFyTW9kYWwsXG4gIH07XG59O1xuXG5leHBvcnQgY29uc3QgY3JlYXRlTmV3UG9zdENvbmZpZyA9ICgpID0+IHtcbiAgY29uc3QgbmV3UG9zdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYnV0dG9uLW5ld1wiKTtcbiAgY29uc3QgbmV3UG9zdE1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNuZXctcG9zdC1tb2RhbFwiKTtcbiAgY29uc3QgYWRkQ2FyZEZvcm0gPSBkb2N1bWVudC5mb3Jtc1tcIm5ldy1wb3N0XCJdO1xuICBjb25zdCBjYXB0aW9uSW5wdXQgPSBhZGRDYXJkRm9ybS5lbGVtZW50cy5jYXB0aW9uO1xuICBjb25zdCBsaW5rSW5wdXQgPSBhZGRDYXJkRm9ybS5lbGVtZW50cy5saW5rO1xuICBjb25zdCBhZGRDYXJkU3VibWl0QnV0dG9uID0gYWRkQ2FyZEZvcm0ucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybS1zdWJtaXRcIik7XG5cbiAgcmV0dXJuIHtcbiAgICBuZXdQb3N0QnV0dG9uLFxuICAgIG5ld1Bvc3RNb2RhbCxcbiAgICBhZGRDYXJkRm9ybSxcbiAgICBjYXB0aW9uSW5wdXQsXG4gICAgbGlua0lucHV0LFxuICAgIGFkZENhcmRTdWJtaXRCdXR0b24sXG4gIH07XG59O1xuXG5leHBvcnQgY29uc3QgY3JlYXRlUHJldmlld01vZGFsQ29uZmlnID0gKCkgPT4ge1xuICBjb25zdCBwcmV2aWV3TW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3ByZXZpZXctbW9kYWxcIik7XG4gIGNvbnN0IG1vZGFsSW1hZ2UgPSBwcmV2aWV3TW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9faW1hZ2VcIik7XG4gIGNvbnN0IG1vZGFsQ2FwdGlvbiA9IHByZXZpZXdNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19jYXB0aW9uXCIpO1xuXG4gIHJldHVybiB7XG4gICAgcHJldmlld01vZGFsLFxuICAgIG1vZGFsSW1hZ2UsXG4gICAgbW9kYWxDYXB0aW9uLFxuICB9O1xufTtcblxuZXhwb3J0IGNvbnN0IGNyZWF0ZUNhcmRTZWxlY3RvckNvbmZpZyA9ICgpID0+IHtcbiAgLy9zZWxlY3QgdGhlIGNhcmQgdGVtcGxhdGUgYW5kIGNhcmRzIGNvbnRhaW5lclxuICBjb25zdCBjYXJkc0NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZHNfX2xpc3RcIik7XG4gIGNvbnN0IGNhcmRUZW1wbGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjY2FyZC10ZW1wbGF0ZVwiKTtcblxuICByZXR1cm4geyBjYXJkc0NvbnRhaW5lciwgY2FyZFRlbXBsYXRlIH07XG59O1xuXG5leHBvcnQgY29uc3QgY3JlYXRlRGVsZXRlQ2FyZENvbmZpZyA9ICgpID0+IHtcbiAgLy9kZWxldGUgY2FyZCBmb3JtIHNlbGVjdG9yc1xuICBjb25zdCBkZWxldGVDYXJkTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2RlbGV0ZS1jb25maXJtYXRpb24tbW9kYWxcIik7XG4gIGNvbnN0IGRlbGV0ZUNhcmRGb3JtID0gZG9jdW1lbnQuZm9ybXNbXCJkZWxldGUtY29uZmlybWF0aW9uXCJdO1xuICBjb25zdCBkZWxldGVDYXJkU3VibWl0QnV0dG9uID0gZGVsZXRlQ2FyZEZvcm0ucXVlcnlTZWxlY3RvcihcbiAgICBcIi5tb2RhbF9fZm9ybS1zdWJtaXRcIlxuICApO1xuXG4gIHJldHVybiB7XG4gICAgZGVsZXRlQ2FyZE1vZGFsLFxuICAgIGRlbGV0ZUNhcmRGb3JtLFxuICAgIGRlbGV0ZUNhcmRTdWJtaXRCdXR0b24sXG4gIH07XG59O1xuIiwiaW1wb3J0IHtcbiAgY29uZmlnLFxuICBkaXNhYmxlQnV0dG9uLFxuICBlbmFibGVWYWxpZGF0aW9uLFxuICByZXNldFZhbGlkYXRpb24sXG59IGZyb20gXCIuLi9zY3JpcHRzL3ZhbGlkYXRpb24uanNcIjtcbmltcG9ydCB7IGNyZWF0ZVByb2ZpbGVDb25maWcsIGNyZWF0ZU5ld1Bvc3RDb25maWcgfSBmcm9tIFwiLi4vdXRpbC9jb25maWcuanNcIjtcbmltcG9ydCB7XG4gIGluaXRpYWxpemVXZWJwYWNrLFxuICBoYW5kbGVMb2FkUHJvZmlsZUluZm8sXG4gIHJlbmRlckNhcmQsXG4gIG9wZW5Nb2RhbCxcbiAgY2xvc2VNb2RhbCxcbiAgY2hhbmdlUHJvZmlsZUluZm8sXG4gIHByZWZpbGxJbnB1dCxcbiAgc2VsZWN0ZWRDYXJkLFxuICBzZWxlY3RlZENhcmRJZCxcbiAgY2FyZENvbmZpZyxcbiAgZGVsZXRlQ29uZmlnLFxuICBzZXRNb2RhbEV2ZW50TGlzdGVuZXJzLFxuICBzZXRJbWFnZUF0dHJpYnV0ZXMsXG4gIGNoYW5nZVRleHRPblN1Ym1pc3Npb24sXG59IGZyb20gXCIuLi91dGlsL3V0aWwuanNcIjtcbmltcG9ydCBBcGkgZnJvbSBcIi4uL2NvbXBvbmVudHMvQXBpLmpzXCI7XG5pbXBvcnQgXCIuL2luZGV4LmNzc1wiO1xuXG5jb25zdCBwcm9maWxlQ29uZmlnID0gY3JlYXRlUHJvZmlsZUNvbmZpZygpO1xuXG5jb25zdCBuZXdQb3N0Q29uZmlnID0gY3JlYXRlTmV3UG9zdENvbmZpZygpO1xuXG5jb25zdCBhcGkgPSBuZXcgQXBpKHtcbiAgYmFzZVVybDogXCJodHRwczovL2Fyb3VuZC1hcGkuZW4udHJpcGxldGVuLXNlcnZpY2VzLmNvbS92MVwiLFxuICB0b2tlbjogXCJhMzA0MDRjZi1lOTY4LTQ1N2QtOTI3Mi1lMDU0MGI3MzNlMzZcIixcbiAgY29udGVudFR5cGU6IFwiYXBwbGljYXRpb24vanNvblwiLFxufSk7XG5cbmNvbnN0IGhhbmRsZVByb2ZpbGVGb3JtU3VibWlzc2lvbiA9IChlKSA9PiB7XG4gIGUucHJldmVudERlZmF1bHQoKTtcbiAgY2hhbmdlVGV4dE9uU3VibWlzc2lvbihcbiAgICBwcm9maWxlQ29uZmlnLmVkaXRQcm9maWxlU3VibWl0QnV0dG9uLFxuICAgIHRydWUsXG4gICAgXCJTYXZpbmcuLi5cIixcbiAgICBcIlNhdmVcIlxuICApO1xuICBhcGlcbiAgICAudXBkYXRlUHJvZmlsZUluZm8oe1xuICAgICAgbmFtZTogcHJvZmlsZUNvbmZpZy5wcm9maWxlTmFtZUlucHV0LnZhbHVlLFxuICAgICAgYWJvdXQ6IHByb2ZpbGVDb25maWcuam9iSW5wdXQudmFsdWUsXG4gICAgfSlcbiAgICAudGhlbigocmVzKSA9PiB7XG4gICAgICBpZiAocmVzLm9rKSB7XG4gICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xuICAgIH0pXG4gICAgLnRoZW4oKGRhdGEpID0+IHtcbiAgICAgIGNoYW5nZVByb2ZpbGVJbmZvKGRhdGEsIHByb2ZpbGVDb25maWcpO1xuICAgICAgY2xvc2VNb2RhbChwcm9maWxlQ29uZmlnLmVkaXRQcm9maWxlTW9kYWwpO1xuICAgIH0pXG4gICAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUuZXJyb3IoZXJyKSlcbiAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICBjaGFuZ2VUZXh0T25TdWJtaXNzaW9uKFxuICAgICAgICBwcm9maWxlQ29uZmlnLmVkaXRQcm9maWxlU3VibWl0QnV0dG9uLFxuICAgICAgICBmYWxzZSxcbiAgICAgICAgXCJTYXZpbmcuLi5cIixcbiAgICAgICAgXCJTYXZlXCJcbiAgICAgICk7XG4gICAgfSk7XG59O1xuXG5jb25zdCBoYW5kbGVDaGFuZ2VBdmF0YXJTdWJtaXNzaW9uID0gKGUpID0+IHtcbiAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICBjaGFuZ2VUZXh0T25TdWJtaXNzaW9uKFxuICAgIHByb2ZpbGVDb25maWcuZWRpdEF2YXRhclN1Ym1pdEJ1dHRvbixcbiAgICB0cnVlLFxuICAgIFwiU2F2aW5nLi4uXCIsXG4gICAgXCJTYXZlXCJcbiAgKTtcbiAgYXBpXG4gICAgLnVwZGF0ZUF2YXRhcih7IGF2YXRhcjogcHJvZmlsZUNvbmZpZy5lZGl0QXZhdGFySW5wdXQudmFsdWUgfSlcbiAgICAudGhlbigocmVzKSA9PiB7XG4gICAgICBpZiAocmVzLm9rKSB7XG4gICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xuICAgIH0pXG4gICAgLnRoZW4oKCkgPT4ge1xuICAgICAgc2V0SW1hZ2VBdHRyaWJ1dGVzKHByb2ZpbGVDb25maWcucHJvZmlsZVBpY3R1cmVFbGVtZW50LCB7XG4gICAgICAgIGxpbms6IHByb2ZpbGVDb25maWcuZWRpdEF2YXRhcklucHV0LnZhbHVlLFxuICAgICAgICBuYW1lOiBcIlByb2ZpbGUgUGljdHVyZVwiLFxuICAgICAgfSk7XG4gICAgICBwcm9maWxlQ29uZmlnLmVkaXRBdmF0YXJGb3JtLnJlc2V0KCk7XG4gICAgICBjbG9zZU1vZGFsKHByb2ZpbGVDb25maWcuZWRpdEF2YXRhck1vZGFsKTtcbiAgICB9KVxuICAgIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmVycm9yKGVycikpXG4gICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgY2hhbmdlVGV4dE9uU3VibWlzc2lvbihcbiAgICAgICAgcHJvZmlsZUNvbmZpZy5lZGl0QXZhdGFyU3VibWl0QnV0dG9uLFxuICAgICAgICBmYWxzZSxcbiAgICAgICAgXCJTYXZpbmcuLi5cIixcbiAgICAgICAgXCJTYXZlXCJcbiAgICAgICk7XG4gICAgfSk7XG59O1xuXG5jb25zdCBoYW5kbGVOZXdQb3N0Rm9ybVN1Ym1pc3Npb24gPSAoZSkgPT4ge1xuICBlLnByZXZlbnREZWZhdWx0KCk7XG4gIGNoYW5nZVRleHRPblN1Ym1pc3Npb24oXG4gICAgbmV3UG9zdENvbmZpZy5hZGRDYXJkU3VibWl0QnV0dG9uLFxuICAgIHRydWUsXG4gICAgXCJTYXZpbmcuLi5cIixcbiAgICBcIlNhdmVcIlxuICApO1xuICBhcGlcbiAgICAuY3JlYXRlQ2FyZCh7XG4gICAgICBuYW1lOiBuZXdQb3N0Q29uZmlnLmNhcHRpb25JbnB1dC52YWx1ZSxcbiAgICAgIGxpbms6IG5ld1Bvc3RDb25maWcubGlua0lucHV0LnZhbHVlLFxuICAgIH0pXG4gICAgLnRoZW4oKHJlcykgPT4ge1xuICAgICAgaWYgKHJlcy5vaykge1xuICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcbiAgICB9KVxuICAgIC50aGVuKChkYXRhKSA9PiB7XG4gICAgICByZW5kZXJDYXJkKGRhdGEsIGNhcmRDb25maWcuY2FyZHNDb250YWluZXIsIGFwaSk7XG4gICAgICBuZXdQb3N0Q29uZmlnLmFkZENhcmRGb3JtLnJlc2V0KCk7XG4gICAgICBkaXNhYmxlQnV0dG9uKFxuICAgICAgICBuZXdQb3N0Q29uZmlnLmFkZENhcmRTdWJtaXRCdXR0b24sXG4gICAgICAgIGNvbmZpZy5pbmFjdGl2ZUJ1dHRvbkNsYXNzXG4gICAgICApO1xuICAgICAgY2xvc2VNb2RhbChuZXdQb3N0Q29uZmlnLm5ld1Bvc3RNb2RhbCk7XG4gICAgfSlcbiAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICBjaGFuZ2VUZXh0T25TdWJtaXNzaW9uKFxuICAgICAgICBuZXdQb3N0Q29uZmlnLmFkZENhcmRTdWJtaXRCdXR0b24sXG4gICAgICAgIGZhbHNlLFxuICAgICAgICBcIlNhdmluZy4uLlwiLFxuICAgICAgICBcIlNhdmVcIlxuICAgICAgKTtcbiAgICB9KTtcbn07XG5cbmNvbnN0IGhhbmRsZURlbGV0ZVN1Ym1pc3Npb24gPSAoZSkgPT4ge1xuICBlLnByZXZlbnREZWZhdWx0KCk7XG4gIGNoYW5nZVRleHRPblN1Ym1pc3Npb24oXG4gICAgZGVsZXRlQ29uZmlnLmRlbGV0ZUNhcmRTdWJtaXRCdXR0b24sXG4gICAgdHJ1ZSxcbiAgICBcIkRlbGV0aW5nLi4uXCIsXG4gICAgXCJEZWxldGVcIlxuICApO1xuICBhcGlcbiAgICAuZGVsZXRlQ2FyZCh7IGNhcmRJZDogc2VsZWN0ZWRDYXJkSWQgfSlcbiAgICAudGhlbigocmVzKSA9PiB7XG4gICAgICBpZiAocmVzLm9rKSB7XG4gICAgICAgIHNlbGVjdGVkQ2FyZC5yZW1vdmUoKTtcbiAgICAgICAgY2xvc2VNb2RhbChkZWxldGVDb25maWcuZGVsZXRlQ2FyZE1vZGFsKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcbiAgICB9KVxuICAgIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmVycm9yKGVycikpXG4gICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgY2hhbmdlVGV4dE9uU3VibWlzc2lvbihcbiAgICAgICAgZGVsZXRlQ29uZmlnLmRlbGV0ZUNhcmRTdWJtaXRCdXR0b24sXG4gICAgICAgIGZhbHNlLFxuICAgICAgICBcIkRlbGV0aW5nLi4uXCIsXG4gICAgICAgIFwiRGVsZXRlXCJcbiAgICAgICk7XG4gICAgfSk7XG59O1xuXG5wcm9maWxlQ29uZmlnLmVkaXRBdmF0YXJCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgb3Blbk1vZGFsKHByb2ZpbGVDb25maWcuZWRpdEF2YXRhck1vZGFsKTtcbn0pO1xuXG5wcm9maWxlQ29uZmlnLmVkaXRBdmF0YXJGb3JtLmFkZEV2ZW50TGlzdGVuZXIoXG4gIFwic3VibWl0XCIsXG4gIGhhbmRsZUNoYW5nZUF2YXRhclN1Ym1pc3Npb25cbik7XG5cbnByb2ZpbGVDb25maWcuZWRpdFByb2ZpbGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgb3Blbk1vZGFsKHByb2ZpbGVDb25maWcuZWRpdFByb2ZpbGVNb2RhbCk7XG4gIHJlc2V0VmFsaWRhdGlvbihcbiAgICBwcm9maWxlQ29uZmlnLnByb2ZpbGVGb3JtLFxuICAgIGNvbmZpZyxcbiAgICBwcm9maWxlQ29uZmlnLmVkaXRQcm9maWxlU3VibWl0QnV0dG9uXG4gICk7XG4gIHByZWZpbGxJbnB1dChcbiAgICBwcm9maWxlQ29uZmlnLnByb2ZpbGVOYW1lRWxlbWVudC50ZXh0Q29udGVudCxcbiAgICBwcm9maWxlQ29uZmlnLnByb2ZpbGVOYW1lSW5wdXRcbiAgKTtcbiAgcHJlZmlsbElucHV0KFxuICAgIHByb2ZpbGVDb25maWcucHJvZmlsZUpvYkVsZW1lbnQudGV4dENvbnRlbnQsXG4gICAgcHJvZmlsZUNvbmZpZy5qb2JJbnB1dFxuICApO1xufSk7XG5cbnByb2ZpbGVDb25maWcucHJvZmlsZUZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcbiAgXCJzdWJtaXRcIixcbiAgaGFuZGxlUHJvZmlsZUZvcm1TdWJtaXNzaW9uXG4pO1xuXG5uZXdQb3N0Q29uZmlnLm5ld1Bvc3RCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgb3Blbk1vZGFsKG5ld1Bvc3RDb25maWcubmV3UG9zdE1vZGFsKTtcbn0pO1xuXG5uZXdQb3N0Q29uZmlnLmFkZENhcmRGb3JtLmFkZEV2ZW50TGlzdGVuZXIoXG4gIFwic3VibWl0XCIsXG4gIGhhbmRsZU5ld1Bvc3RGb3JtU3VibWlzc2lvblxuKTtcblxuZGVsZXRlQ29uZmlnLmRlbGV0ZUNhcmRGb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgaGFuZGxlRGVsZXRlU3VibWlzc2lvbik7XG5kZWxldGVDb25maWcuZGVsZXRlQ2FyZEZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInJlc2V0XCIsICgpID0+XG4gIGNsb3NlTW9kYWwoZGVsZXRlQ29uZmlnLmRlbGV0ZUNhcmRNb2RhbClcbik7XG5cbmluaXRpYWxpemVXZWJwYWNrKCk7XG5zZXRNb2RhbEV2ZW50TGlzdGVuZXJzKCk7XG5cbmFwaVxuICAuZ2V0VXNlckluZm8oKVxuICAudGhlbigocmVzKSA9PiB7XG4gICAgaWYgKHJlcy5vaykge1xuICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgfVxuICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcbiAgfSlcbiAgLnRoZW4oKGRhdGEpID0+IHtcbiAgICBoYW5kbGVMb2FkUHJvZmlsZUluZm8oZGF0YSwgcHJvZmlsZUNvbmZpZyk7XG4gIH0pXG4gIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgY29uc29sZS5lcnJvcihlcnIpO1xuICB9KTtcblxuYXBpXG4gIC5nZXRDYXJkcygpXG4gIC50aGVuKChyZXMpID0+IHtcbiAgICBpZiAocmVzLm9rKSB7XG4gICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICB9XG4gICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xuICB9KVxuICAudGhlbigoZGF0YSkgPT4ge1xuICAgIGlmICghZGF0YS5sZW5ndGgpIHtcbiAgICAgIHJldHVybiBjb25zb2xlLmxvZyhcIm5vIGNhcmRzIGZvdW5kXCIpO1xuICAgIH1cbiAgICBkYXRhLmZvckVhY2goKGNhcmQpID0+IHtcbiAgICAgIHJlbmRlckNhcmQoY2FyZCwgY2FyZENvbmZpZy5jYXJkc0NvbnRhaW5lciwgYXBpKTtcbiAgICB9KTtcbiAgfSk7XG5cbmVuYWJsZVZhbGlkYXRpb24oY29uZmlnKTtcbiIsImNsYXNzIEFwaSB7XG4gIGNvbnN0cnVjdG9yKHsgYmFzZVVybCwgdG9rZW4sIGNvbnRlbnRUeXBlIH0pIHtcbiAgICB0aGlzLl9iYXNlVXJsID0gYmFzZVVybDtcbiAgICB0aGlzLl9oZWFkZXJzID0ge1xuICAgICAgYXV0aG9yaXphdGlvbjogdG9rZW4sXG4gICAgICBcIkNvbnRlbnQtVHlwZVwiOiBjb250ZW50VHlwZSxcbiAgICB9O1xuICB9XG5cbiAgX2luaXRpYWxpemVSZXF1ZXN0KCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfSR7dGhpcy5fZW5kcG9pbnR9YCwge1xuICAgICAgbWV0aG9kOiB0aGlzLl9tZXRob2QsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgYm9keTogdGhpcy5fYm9keSA/IEpTT04uc3RyaW5naWZ5KHRoaXMuX2JvZHkpIDogbnVsbCxcbiAgICB9KTtcbiAgfVxuXG4gIF9nZW5lcmF0ZVJlcXVlc3RPcHRpb25zKHsgZW5kcG9pbnQsIG1ldGhvZCwgYm9keSA9IG51bGwgfSkge1xuICAgIHRoaXMuX2VuZHBvaW50ID0gZW5kcG9pbnQ7XG4gICAgdGhpcy5fbWV0aG9kID0gbWV0aG9kO1xuICAgIHRoaXMuX2JvZHkgPSBib2R5O1xuICB9XG5cbiAgLyogVVNFUiBST1VURVMgKi9cbiAgLy9nZXQgdXNlciBpbmZvcm1hdGlvblxuICBnZXRVc2VySW5mbygpIHtcbiAgICB0aGlzLl9nZW5lcmF0ZVJlcXVlc3RPcHRpb25zKHsgZW5kcG9pbnQ6IFwiL3VzZXJzL21lXCIsIG1ldGhvZDogXCJHRVRcIiB9KTtcbiAgICByZXR1cm4gdGhpcy5faW5pdGlhbGl6ZVJlcXVlc3QoKTtcbiAgfVxuXG4gIC8vdXBkYXRlIHByb2ZpbGUgaW5mb3JtYXRpb25cbiAgdXBkYXRlUHJvZmlsZUluZm8oeyBuYW1lLCBhYm91dCB9KSB7XG4gICAgdGhpcy5fZ2VuZXJhdGVSZXF1ZXN0T3B0aW9ucyh7XG4gICAgICBlbmRwb2ludDogXCIvdXNlcnMvbWVcIixcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxuICAgICAgYm9keTogeyBuYW1lLCBhYm91dCB9LFxuICAgIH0pO1xuICAgIHJldHVybiB0aGlzLl9pbml0aWFsaXplUmVxdWVzdCgpO1xuICB9XG5cbiAgLy91cGRhdGUgcHJvZmlsZSBwaWN0dXJlXG4gIHVwZGF0ZUF2YXRhcih7IGF2YXRhciB9KSB7XG4gICAgdGhpcy5fZ2VuZXJhdGVSZXF1ZXN0T3B0aW9ucyh7XG4gICAgICBlbmRwb2ludDogXCIvdXNlcnMvbWUvYXZhdGFyXCIsXG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcbiAgICAgIGJvZHk6IHtcbiAgICAgICAgYXZhdGFyLFxuICAgICAgfSxcbiAgICB9KTtcbiAgICByZXR1cm4gdGhpcy5faW5pdGlhbGl6ZVJlcXVlc3QoKTtcbiAgfVxuXG4gIC8qIENBUkQgUk9VVEVTICovXG4gIC8vZ2V0IGFsbCBjYXJkc1xuICBnZXRDYXJkcygpIHtcbiAgICB0aGlzLl9nZW5lcmF0ZVJlcXVlc3RPcHRpb25zKHtcbiAgICAgIGVuZHBvaW50OiBcIi9jYXJkc1wiLFxuICAgICAgbWV0aG9kOiBcIkdFVFwiLFxuICAgIH0pO1xuICAgIHJldHVybiB0aGlzLl9pbml0aWFsaXplUmVxdWVzdCgpO1xuICB9XG5cbiAgLy9jcmVhdGUgYSBjYXJkXG4gIGNyZWF0ZUNhcmQoeyBuYW1lLCBsaW5rIH0pIHtcbiAgICB0aGlzLl9nZW5lcmF0ZVJlcXVlc3RPcHRpb25zKHtcbiAgICAgIGVuZHBvaW50OiBcIi9jYXJkc1wiLFxuICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgIGJvZHk6IHsgbmFtZSwgbGluayB9LFxuICAgIH0pO1xuICAgIHJldHVybiB0aGlzLl9pbml0aWFsaXplUmVxdWVzdCgpO1xuICB9XG5cbiAgLy9kZWxldGUgYSBjYXJkXG4gIGRlbGV0ZUNhcmQoeyBjYXJkSWQgfSkge1xuICAgIHRoaXMuX2dlbmVyYXRlUmVxdWVzdE9wdGlvbnMoe1xuICAgICAgZW5kcG9pbnQ6IGAvY2FyZHMvJHtjYXJkSWR9YCxcbiAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcbiAgICB9KTtcbiAgICByZXR1cm4gdGhpcy5faW5pdGlhbGl6ZVJlcXVlc3QoKTtcbiAgfVxuXG4gIC8vYWRkIGEgbGlrZSB0byBhIGNhcmRcbiAgYWRkTGlrZSh7IGNhcmRJZCB9KSB7XG4gICAgdGhpcy5fZ2VuZXJhdGVSZXF1ZXN0T3B0aW9ucyh7XG4gICAgICBlbmRwb2ludDogYC9jYXJkcy8ke2NhcmRJZH0vbGlrZXNgLFxuICAgICAgbWV0aG9kOiBcIlBVVFwiLFxuICAgIH0pO1xuICAgIHJldHVybiB0aGlzLl9pbml0aWFsaXplUmVxdWVzdCgpO1xuICB9XG5cbiAgLy9yZW1vdmUgYSBsaWtlIGZyb20gYSBjYXJkXG4gIGRlbGV0ZUxpa2UoeyBjYXJkSWQgfSkge1xuICAgIHRoaXMuX2dlbmVyYXRlUmVxdWVzdE9wdGlvbnMoe1xuICAgICAgZW5kcG9pbnQ6IGAvY2FyZHMvJHtjYXJkSWR9L2xpa2VzYCxcbiAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcbiAgICB9KTtcbiAgICByZXR1cm4gdGhpcy5faW5pdGlhbGl6ZVJlcXVlc3QoKTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBBcGk7XG4iXSwibmFtZXMiOlsiX193ZWJwYWNrX3JlcXVpcmVfXyIsImhpZGVJbnB1dEVycm9yIiwiZm9ybUVsZW1lbnQiLCJpbnB1dEVsZW1lbnQiLCJzZXR0aW5ncyIsImVycm9yRWxlbWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJpZCIsImlucHV0RXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJjbGFzc0xpc3QiLCJyZW1vdmUiLCJ0ZXh0Q29udGVudCIsImRpc2FibGVCdXR0b24iLCJidXR0b24iLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiYWRkIiwiZGlzYWJsZWQiLCJlbmFibGVCdXR0b24iLCJ0b2dnbGVCdXR0b25TdGF0ZSIsImlucHV0TGlzdCIsImJ1dHRvbkVsZW1lbnQiLCJzb21lIiwidmFsaWRpdHkiLCJ2YWxpZCIsImhhc0ludmFsaWRJbnB1dCIsImVuYWJsZVZhbGlkYXRpb24iLCJmb3JtU2VsZWN0b3IiLCJmaWVsZHNldFNlbGVjdG9yIiwiQXJyYXkiLCJmcm9tIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yQWxsIiwiZm9yRWFjaCIsImFkZEV2ZW50TGlzdGVuZXIiLCJldnQiLCJwcmV2ZW50RGVmYXVsdCIsImZpZWxkc2V0Iiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJpbnB1dFNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJjaGVja0lucHV0VmFsaWRpdHkiLCJzaG93SW5wdXRFcnJvciIsImVycm9yTWVzc2FnZSIsInZhbGlkYXRpb25NZXNzYWdlIiwiY29uZmlnIiwiZGVsZXRlQ29uZmlnIiwiY3JlYXRlRGVsZXRlQ2FyZENvbmZpZyIsImRlbGV0ZUNhcmRNb2RhbCIsImRlbGV0ZUNhcmRGb3JtIiwiZm9ybXMiLCJkZWxldGVDYXJkU3VibWl0QnV0dG9uIiwiY2FyZENvbmZpZyIsImNhcmRzQ29udGFpbmVyIiwiY2FyZFRlbXBsYXRlIiwicHJldmlld01vZGFsQ29uZmlnIiwiY3JlYXRlUHJldmlld01vZGFsQ29uZmlnIiwicHJldmlld01vZGFsIiwibW9kYWxJbWFnZSIsIm1vZGFsQ2FwdGlvbiIsImNoYW5nZVByb2ZpbGVJbmZvIiwiZGF0YSIsImNoYW5nZVRleHQiLCJuYW1lIiwicHJvZmlsZU5hbWVFbGVtZW50IiwiYWJvdXQiLCJwcm9maWxlSm9iRWxlbWVudCIsInJlbmRlckNhcmQiLCJpdGVtIiwiY29udGFpbmVyIiwiYXBpIiwibWV0aG9kIiwiY2FyZEVsZW1lbnQiLCJnZXRDYXJkRWxlbWVudCIsIm9wZW5Nb2RhbCIsIm1vZGFsIiwiaGFuZGxlRXNjYXBlIiwiY2xvc2VNb2RhbCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJlIiwia2V5IiwicHJlZmlsbElucHV0IiwidGV4dCIsInZhbHVlIiwiZWxlbWVudFRvQ2hhbmdlIiwic2V0SW1hZ2VBdHRyaWJ1dGVzIiwiaW1hZ2VFbGVtZW50Iiwic2V0QXR0cmlidXRlIiwibGluayIsInNlbGVjdGVkQ2FyZCIsInNlbGVjdGVkQ2FyZElkIiwiY29udGVudCIsImNsb25lTm9kZSIsImNhcmRUaXRsZSIsImNhcmRJbWFnZSIsImxpa2VCdXR0b24iLCJkZWxldGVCdXR0b24iLCJpc0xpa2VkIiwiZGVsZXRlTGlrZSIsImNhcmRJZCIsIl9pZCIsInRoZW4iLCJ0b2dnbGUiLCJjYXRjaCIsImVyciIsImNvbnNvbGUiLCJlcnJvciIsImFkZExpa2UiLCJyZXMiLCJvayIsImpzb24iLCJQcm9taXNlIiwicmVqZWN0Iiwic3RhdHVzIiwiaGFuZGxlRGVsZXRlQ2FyZCIsImNoYW5nZVRleHRPblN1Ym1pc3Npb24iLCJpc0xvYWRpbmciLCJuZXdUZXh0IiwiZGVmYXVsdFRleHQiLCJwcm9maWxlQ29uZmlnIiwiY3JlYXRlUHJvZmlsZUNvbmZpZyIsImVkaXRQcm9maWxlQnV0dG9uIiwiZWRpdFByb2ZpbGVNb2RhbCIsInByb2ZpbGVGb3JtIiwicHJvZmlsZU5hbWVJbnB1dCIsImVsZW1lbnRzIiwiam9iSW5wdXQiLCJkZXNjcmlwdGlvbiIsImVkaXRQcm9maWxlU3VibWl0QnV0dG9uIiwicHJvZmlsZSIsInByb2ZpbGVQaWN0dXJlRWxlbWVudCIsImVkaXRBdmF0YXJNb2RhbCIsImVkaXRBdmF0YXJCdXR0b24iLCJlZGl0QXZhdGFyRm9ybSIsImVkaXRBdmF0YXJJbnB1dCIsImF2YXRhciIsImVkaXRBdmF0YXJTdWJtaXRCdXR0b24iLCJuZXdQb3N0Q29uZmlnIiwiY3JlYXRlTmV3UG9zdENvbmZpZyIsIm5ld1Bvc3RCdXR0b24iLCJuZXdQb3N0TW9kYWwiLCJhZGRDYXJkRm9ybSIsImNhcHRpb25JbnB1dCIsImNhcHRpb24iLCJsaW5rSW5wdXQiLCJhZGRDYXJkU3VibWl0QnV0dG9uIiwiY29uc3RydWN0b3IiLCJiYXNlVXJsIiwidG9rZW4iLCJjb250ZW50VHlwZSIsInRoaXMiLCJfYmFzZVVybCIsIl9oZWFkZXJzIiwiYXV0aG9yaXphdGlvbiIsIl9pbml0aWFsaXplUmVxdWVzdCIsImZldGNoIiwiX2VuZHBvaW50IiwiX21ldGhvZCIsImhlYWRlcnMiLCJib2R5IiwiX2JvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwiX2dlbmVyYXRlUmVxdWVzdE9wdGlvbnMiLCJlbmRwb2ludCIsImdldFVzZXJJbmZvIiwidXBkYXRlUHJvZmlsZUluZm8iLCJ1cGRhdGVBdmF0YXIiLCJnZXRDYXJkcyIsImNyZWF0ZUNhcmQiLCJkZWxldGVDYXJkIiwicmVzZXQiLCJmaW5hbGx5IiwicmVzZXRWYWxpZGF0aW9uIiwic3VibWl0QnV0dG9uIiwiaW5wdXQiLCJpbml0aWFsaXplV2VicGFjayIsImhlYWRlckltYWdlRWxlbWVudCIsInBlbmNpbEltYWdlRWxlbWVudCIsInBsdXNJbWFnZUVsZW1lbnQiLCJhdmF0YXJQZW5jaWxFbGVtZW50IiwiaGVhZGVySW1hZ2UiLCJwZW5jaWxJbWFnZSIsInBsdXNJbWFnZSIsImF2YXRhclBlbmNpbCIsImVsZW1lbnQiLCJkZWZpbmVTcmNGb3JXZWJwYWNrSW1hZ2VzIiwiaW1hZ2VJbXBvcnQiLCJzcmMiLCJ0YXJnZXQiLCJjb250YWlucyIsImhhbmRsZUxvYWRQcm9maWxlSW5mbyIsImxlbmd0aCIsImxvZyIsImNhcmQiXSwic291cmNlUm9vdCI6IiJ9